(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{1243:function(e,n,a){"use strict";a.r(n);a(56);var t=a(15),i=a(16),o=a(17),r=a(20),w=a(18),l=a(19),d=a(0),p=a.n(d),c=a(248),s=a(48),u=function(e){function n(e){var a;return Object(i.a)(this,n),(a=Object(r.a)(this,Object(w.a)(n).call(this,e))).requestList=function(){s.a.get({url:"/map/bike_list",data:{params:a.params}}).then(function(e){0===e.code&&(a.setState({total_count:e.result.total_count}),a.renderMap(e.result))})},a.handleFilter=function(e){a.params=e,a.requestList()},a.renderMap=function(e){var n=e.route_list;a.map=new window.BMap.Map("container");var t=n[0].split(","),i=(new window.BMap.Point(t[0],t[1]),n[n.length-1].split(",")),o=new window.BMap.Point(i[0],i[1]);a.map.centerAndZoom(o,11),a.addMapControl(),a.drawBikeRoute(e.route_list),a.drawServiceArea(e.service_list),a.drawBikeIcon(e.bike_list)},a.addMapControl=function(){var e=a.map;e.addControl(new window.BMap.ScaleControl({anchor:window.BMAP_ANCHOR_TOP_RIGHT})),e.addControl(new window.BMap.NavigationControl({anchor:window.BMAP_ANCHOR_TOP_RIGHT})),e.enableScrollWheelZoom(!0)},a.drawBikeRoute=function(e){if(e.length>0){var n=e[0].split(","),t=new window.BMap.Point(n[0],n[1]),i=new window.BMap.Icon("/assets/start_point.png",new window.BMap.Size(36,42),{imageSize:new window.BMap.Size(36,42),anchor:new window.BMap.Size(18,42)}),o=new window.BMap.Marker(t,{icon:i});a.map.addOverlay(o);var r=e[e.length-1].split(","),w=new window.BMap.Point(r[0],r[1]),l=new window.BMap.Icon("/assets/end_point.png",new window.BMap.Size(36,42),{imageSize:new window.window.BMap.Size(36,42),anchor:new window.BMap.Size(18,42)}),d=new window.BMap.Marker(w,{icon:l});a.map.addOverlay(d),d.addEventListener("click",function(e){alert("\u5f53\u524d\u4f4d\u7f6e\uff1a"+e.point.lng+", "+e.point.lat)});for(var p=[],c=0;c<e.length;c++){var s=e[c].split(",");p.push(new window.BMap.Point(s[0],s[1]))}var u=new window.BMap.Polyline(p,{strokeColor:"#000000",strokeWeight:4,strokeOpacity:1});a.map.addOverlay(u),a.map.centerAndZoom(w,11)}},a.drawServiceArea=function(e){for(var n=[],t=0;t<e.length;t++){var i=e[t];n.push(new window.BMap.Point(i.lon,i.lat))}var o=new window.BMap.Polygon(n,{strokeColor:"#ef4136",strokeWeight:3,strokeOpacity:1,fillColor:""});a.map.addOverlay(o)},a.drawBikeIcon=function(e){var n=new window.BMap.Icon("/assets/bike.jpg",new window.BMap.Size(36,42),{imageSize:new window.BMap.Size(36,42),anchor:new window.BMap.Size(18,42)});e.forEach(function(e){var t=e.split(","),i=new window.BMap.Point(t[0],t[1]),o=new window.BMap.Marker(i,{icon:n});a.map.addOverlay(o)})},a.state={total_count:0},a.map="",a.bikeMapFormList=[{type:"\u57ce\u5e02",field:"city"},{type:"\u65f6\u95f4\u67e5\u8be2",field:"search_time"},{type:"SELECT",label:"\u8ba2\u5355\u72b6\u6001",field:"order_status",placeholder:"\u5168\u90e8",initialValue:"0",list:[{id:"0",name:"\u5168\u90e8"},{id:"1",name:"\u8fdb\u884c\u4e2d"},{id:"2",name:"\u884c\u7a0b\u7ed3\u675f"}],width:100}],a}return Object(l.a)(n,e),Object(o.a)(n,[{key:"componentDidMount",value:function(){this.requestList()}},{key:"render",value:function(){return p.a.createElement(d.Fragment,null,p.a.createElement(t.a,null,p.a.createElement(c.a,{formList:this.bikeMapFormList,filterSubmit:this.handleFilter})),p.a.createElement(t.a,{style:{marginTop:10}},p.a.createElement("div",null,"\u5171 ",this.state.total_count," \u8f86\u8f66"),p.a.createElement("div",{id:"container",style:{height:500}})))}}]),n}(d.Component);n.default=u}}]);
//# sourceMappingURL=BikeMapPage.73fbd279.chunk.js.map