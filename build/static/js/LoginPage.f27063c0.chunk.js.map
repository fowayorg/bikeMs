{"version":3,"sources":["webpack:///./src/views/login/login.less?f44d","views/login/login.less","views/login/index.js"],"names":["content","__webpack_require__","module","i","options","hmr","transform","insertInto","undefined","locals","exports","push","FormItem","antd_es_form__WEBPACK_IMPORTED_MODULE_18__","Item","Login","props","_this","Object","F_Project_bike_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_12__","this","F_Project_bike_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_14__","F_Project_bike_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_15__","call","handleSubmit","e","dispatch","preventDefault","userInfo","form","getFieldsValue","validateFields","error","value","axios","login","url","data","userName","pwd","userPwd","then","res","antd_es_message__WEBPACK_IMPORTED_MODULE_11__","success","handleLogin","result","token","localStorage","setItem","JSON","stringify","getFieldDecorator","react__WEBPACK_IMPORTED_MODULE_19___default","a","createElement","react_router_dom__WEBPACK_IMPORTED_MODULE_22__","to","react__WEBPACK_IMPORTED_MODULE_19__","className","src","alt","antd_es_card__WEBPACK_IMPORTED_MODULE_1__","style","width","initialValue","rules","required","message","min","max","pattern","RegExp","antd_es_input__WEBPACK_IMPORTED_MODULE_7__","prefix","antd_es_icon__WEBPACK_IMPORTED_MODULE_9__","type","placeholder","valuePropName","antd_es_checkbox__WEBPACK_IMPORTED_MODULE_5__","href","float","antd_es_button__WEBPACK_IMPORTED_MODULE_3__","block","onClick","Component","connect","state","create"],"mappings":"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","file":"static/js/LoginPage.f27063c0.chunk.js","sourcesContent":["\nvar content = require(\"!!../../../node_modules/css-loader/index.js??ref--6-oneOf-0-1!../../../node_modules/postcss-loader/src/index.js??postcss!../../../node_modules/less-loader/dist/cjs.js??ref--6-oneOf-0-3!./login.less\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../node_modules/css-loader/index.js??ref--6-oneOf-0-1!../../../node_modules/postcss-loader/src/index.js??postcss!../../../node_modules/less-loader/dist/cjs.js??ref--6-oneOf-0-3!./login.less\", function() {\n\t\tvar newContent = require(\"!!../../../node_modules/css-loader/index.js??ref--6-oneOf-0-1!../../../node_modules/postcss-loader/src/index.js??postcss!../../../node_modules/less-loader/dist/cjs.js??ref--6-oneOf-0-3!./login.less\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".login-header {\\n  position: fixed;\\n  top: 0;\\n  left: 0;\\n  width: 100%;\\n  height: 80px;\\n  line-height: 80px;\\n  background: rgba(21, 20, 13, 0.9);\\n}\\n.login-header .login-logo {\\n  padding-left: 100px;\\n  font-size: 20px;\\n  color: white;\\n}\\n.login-header .login-logo img {\\n  height: 40px;\\n  margin-right: 15px;\\n}\\n.login-content-wrap {\\n  min-height: 550px;\\n  height: calc(100vh);\\n  background: url(https://media.xiaohuali.com/ebike-fc/login/banner.jpg) no-repeat center;\\n  background-size: cover;\\n}\\n.login-content-wrap .login-content {\\n  position: relative;\\n  top: 50%;\\n  display: flex;\\n  max-width: 960px;\\n  margin: 0 auto;\\n  padding: 0 20px;\\n  -webkit-transform: translateY(-50%);\\n  transform: translateY(-50%);\\n  align-items: center;\\n  justify-content: center;\\n}\\n.login-content-wrap .login-content .word {\\n  flex: 7 1;\\n  line-height: 1.4;\\n  color: #fff;\\n  font-size: 64px;\\n  font-weight: bold;\\n}\\n.login-content-wrap .login-content .login-box {\\n  position: relative;\\n  flex: 4 1;\\n  height: 390px;\\n  padding: 40px 30px 20px 30px;\\n  background: #fff;\\n  overflow: hidden;\\n  box-sizing: border-box;\\n}\\n.login-content-wrap .login-content .login-box .title {\\n  line-height: 1;\\n  margin-bottom: 50px;\\n  font-size: 35px;\\n  color: #333;\\n  font-weight: bold;\\n  text-align: center;\\n}\\n.login-content-wrap .login-content .login-button {\\n  margin-bottom: 10px;\\n  margin-right: 15px;\\n}\\n\", \"\"]);\n\n// exports\n","import React, { Component, Fragment } from 'react'\r\nimport { Card, Form, Input, Button, message, Icon, Checkbox } from 'antd'\r\nimport axios from '../../axios'\r\nimport { connect } from 'react-redux'\r\nimport { Redirect } from 'react-router-dom'\r\nimport { handleLogin } from '../../store/actionCreator'\r\nimport './login.less'\r\n\r\nconst FormItem = Form.Item\r\nclass Login extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n  }\r\n  handleSubmit = (e) => {\r\n    const { dispatch } = this.props\r\n    e.preventDefault()\r\n    let userInfo = this.props.form.getFieldsValue()\r\n    this.props.form.validateFields((error, value) => {\r\n      if (!error) {\r\n        // message.success(`${userInfo.userName} 恭喜您通过本次表单学习，当前密码为${userInfo.userPwd}`)\r\n        axios.login({\r\n          url: '/login',\r\n          data: {\r\n            userName: userInfo.userName,\r\n            pwd: userInfo.userPwd\r\n          }\r\n        }).then(res => {\r\n          message.success(`登录成功！`)\r\n          /* this.setState(() => ({\r\n            token: res.result.data.token\r\n          })) */\r\n          dispatch(handleLogin(res.result.data.token))\r\n          localStorage.setItem('token', JSON.stringify(res.result.data.token))\r\n        })\r\n      }\r\n\r\n    })\r\n\r\n  }\r\n\r\n  render() {\r\n    const token = this.props.token\r\n    const { getFieldDecorator } = this.props.form\r\n    if (token) {\r\n      return <Redirect to='/home'></Redirect>\r\n    } else {\r\n      return (\r\n        <Fragment>\r\n          <div className='login-page'>\r\n            <header className='login-header'>\r\n              <div className='login-logo'>\r\n                <img src=\"/assets/logo-ant.svg\" alt=\"共享单车后台管理系统\" />\r\n                React+AntD后台管理系统\r\n                            </div>\r\n\r\n            </header>\r\n            <div className='login-content-wrap'>\r\n              <div className='login-content'>\r\n                <div className='word'>\r\n                  共享出行\r\n                                <br></br>\r\n                  引领城市新经济\r\n                                </div>\r\n                <div className='login-box' >\r\n                  <div className='title'>\r\n                    欢迎你，请先登录\r\n                                </div>\r\n                  <Card>\r\n                    <Form style={{ width: 260 }}>\r\n                      <FormItem>\r\n                        {\r\n                          getFieldDecorator('userName', {\r\n                            initialValue: '',\r\n                            rules: [\r\n                              {\r\n                                required: true,\r\n                                message: '用户名不为空'\r\n                              },\r\n                              {\r\n                                min: 5,\r\n                                max: 10,\r\n                                message: '用户名长度不在范围内'\r\n                              },\r\n                              {\r\n                                pattern: new RegExp('^\\\\w+$', 'g'),\r\n                                message: '用户名必须为字母或者数字'\r\n                              }\r\n                            ]\r\n                          })(<Input prefix={<Icon type='user' />} placeholder='请输入用户名' />)\r\n                        }\r\n\r\n                      </FormItem>\r\n                      <FormItem>\r\n                        {\r\n                          getFieldDecorator('userPwd', {\r\n                            initialValue: '',\r\n                            rules: [\r\n                              {\r\n                                required: true,\r\n                                message: '密码不为空'\r\n                              }\r\n                            ]\r\n                          })(<Input type='password' prefix={<Icon type='lock' />} placeholder='请输入密码' />)\r\n                        }\r\n                      </FormItem>\r\n                      <FormItem>\r\n                        {\r\n                          getFieldDecorator('remember', {\r\n                            valuePropName: 'checked',\r\n                            initialValue: false,\r\n                            rules: []\r\n                          })(\r\n                            <Checkbox>记住密码</Checkbox>\r\n                          )\r\n                        }\r\n                        <a href=\"#/login\" style={{ float: 'right' }}>忘记密码</a>\r\n                      </FormItem>\r\n                      <FormItem>\r\n                        <Button type='primary' block onClick={this.handleSubmit}>登录</Button>\r\n                      </FormItem>\r\n                    </Form>\r\n                  </Card>\r\n                </div>\r\n              </div>\r\n\r\n            </div>\r\n          </div>\r\n        </Fragment>\r\n      )\r\n    }\r\n\r\n  }\r\n}\r\n\r\nconst mapState = (state) => ({\r\n  token: state.token\r\n})\r\n\r\nexport default connect(mapState, null)(Form.create()(Login))\r\n"],"sourceRoot":""}